## **Step 5: Creating Your Own Helm Chart ðŸ› **

So far, weâ€™ve been using **pre-built charts (e.g., Bitnami)**. Now, letâ€™s create one from scratch to learn its structure and templating.

---

### **5.1 Scaffold a New Chart ðŸ“¦**

Run:

```bash
helm create mychart
```

This generates:

```
mychart/
â”œâ”€â”€ Chart.yaml        # Chart metadata (name, version, description)
â”œâ”€â”€ values.yaml       # Default values for your chart
â”œâ”€â”€ charts/           # For chart dependencies (optional)
â”œâ”€â”€ templates/        # K8s manifest templates
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â”œâ”€â”€ _helpers.tpl  # Reusable template helpers
â”‚   â””â”€â”€ tests/test-connection.yaml
â””â”€â”€ .helmignore       # Files to ignore when packaging
```

---

### **5.2 Understanding Key Files ðŸ§ **

* **Chart.yaml** â†’ Name, version, description of the chart.
* **values.yaml** â†’ Default configuration (you can override later).
* **templates/** â†’ Contains Go templated Kubernetes YAML files.
* **\_helpers.tpl** â†’ Stores helper templates for reusability.

---

### **5.3 Customize Your Chart ðŸŽ¨**

Example: Change default image & replica count.

Edit `values.yaml`:

```yaml
replicaCount: 2

image:
  repository: nginx
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: NodePort
  port: 80
```

---

### **5.4 Deploy Your Custom Chart ðŸš€**

Install it on Minikube:

```bash
helm install my-nginx-local ./mychart
```

Verify:

```bash
kubectl get pods
kubectl get svc
```

---

### **5.5 Upgrade Your Chart ðŸ”„**

Change `replicaCount` in `values.yaml` from 2 â†’ 3:

```bash
helm upgrade my-nginx-local ./mychart
```

Check:

```bash
kubectl get pods
```

---

### **5.6 Package & Share Your Chart ðŸ“¤**

Once ready:

```bash
helm package mychart
```

This creates a `.tgz` file â†’ your distributable Helm chart.

You can:

* Push it to a **Helm repository** (e.g., ChartMuseum, Harbor)
* Share it internally in your team
* Version it (e.g., `1.0.0`, `1.1.0`)

---

### **5.7 Test Your Chart ðŸ§ª**

Helm provides testing:

```bash
helm test my-nginx-local
```

Default chart includes a simple `test-connection.yaml`.

---

### **What You Learned in Step 5 âœ…**

* How to **create a chart from scratch**
* Understand its structure & templating basics
* Deploy, upgrade, and package your own Helm chart

---

### **Next Step â†’ Step 6: Advanced Helm Concepts âš¡**

* Chart dependencies (subcharts)
* Hooks (pre/post-install actions)
* Secrets & ConfigMaps
* Linting & validating (`helm lint`, `helm template`)

---

Would you like me to:

1. Create a **visual diagram of a Helm chart structure & lifecycle**?
2. Or directly move to **Step 6: Advanced Helm Concepts**?

Also â€” should I give you a **hands-on challenge: build a custom Helm chart for a simple Python/Flask app or Node.js app**?
